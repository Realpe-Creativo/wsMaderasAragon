/* =========================================
   FIX GLOBAL: evita scroll horizontal iOS
   ========================================= */
html,
body {
    overflow-x: hidden;
    width: 100%;
}

/* (Opcional pero recomendado) evita overscroll lateral iOS */
body {
    position: relative;
}
.cloud-layer {
    position: absolute;
    inset: 0;
    overflow: hidden;
    pointer-events: none;

    z-index: 0; /* fondo */
}

section > *:not(.cloud-layer) {
    position: relative;
    z-index: 1;
}

/* Keyframes: suben constantemente y se reinician */
@keyframes moveCloudsUp {
    0%   { transform: translate3d(0,0,0); }
    100% { transform: translate3d(0,-130vh,0); }
}

/* Base de nube */
.cloud {
    position: absolute;
    bottom: -250px;
    background: rgba(255,255,255,0.45);
    filter: blur(35px);
    border-radius: 50%;
    pointer-events: none;
    will-change: transform;
    animation-name: moveCloudsUp;
    animation-timing-function: linear;
    animation-iteration-count: infinite;

    /* Evita que el blur empuje el layout horizontalmente */
    left: clamp(0px, var(--cloud-left, 50%), calc(100% - 1px));
    transform: translateX(-50%);
}

/* Cada nube con tamaño, posición, duración y delay NEGATIVO */
.cloud.one   { --cloud-left:  5%; width: 220px; height: 110px; animation-duration: 30s; animation-delay:  -5s; }
.cloud.two   { --cloud-left: 20%; width: 180px; height: 100px; animation-duration: 35s; animation-delay: -15s; }
.cloud.three { --cloud-left: 40%; width: 250px; height: 120px; animation-duration: 40s; animation-delay: -25s; }
.cloud.four  { --cloud-left: 60%; width: 200px; height: 110px; animation-duration: 28s; animation-delay: -10s; }
.cloud.five  { --cloud-left: 80%; width: 230px; height: 115px; animation-duration: 33s; animation-delay: -20s; }
.cloud.six   { --cloud-left: 30%; width: 210px; height: 130px; animation-duration: 38s; animation-delay: -30s; }

/* En mobile: reduce un poco el blur para iPhone (menos “pintura” fuera) */
@media (max-width: 768px) {
    .cloud { filter: blur(26px); }
}
/* =========================================
   SLIDE STACK (única definición)
   ========================================= */

/* Wrapper opcional si lo tienes; si no existe, no pasa nada */
.slide-stack-wrapper,
.slide-stack-container {
    width: 100%;
    max-width: 100%;
    overflow-x: hidden; /* clave para iPhone cuando hay transforms */
}

/* Stack */
.slide-stack {
    position: relative;
    /* Más “seguro” que usar 90vw: evita que el translate se salga del viewport */
    width: min(420px, calc(100vw - 32px));
    max-width: 420px;
    aspect-ratio: 1 / 1;

    margin-inline: auto;
    /* Importante: NO poner display:flex aquí */
}

/* Imágenes */
.slide-stack__img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 18px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
    user-select: none;
    cursor: pointer;

    transition: transform 0.35s ease, opacity 0.25s ease;
    will-change: transform;
}

/* Capas (desktop / default) */
.slide-stack__img--0 {
    transform: translate(-20px, 18px) rotate(-10deg);
    opacity: 0.85;
}

.slide-stack__img--1 {
    transform: translate(20px, 14px) rotate(8deg);
    opacity: 0.9;
}

.slide-stack__img--2 {
    transform: translate(-8px, 8px) rotate(-4deg);
    opacity: 0.95;
}

.slide-stack__img--3 {
    transform: translate(10px, 6px) rotate(4deg);
}

.slide-stack__img--4 {
    transform: translate(0, 0) rotate(0deg);
}

/* Hover (solo escritorio) */
@media (hover: hover) and (pointer: fine) {
    .slide-stack:hover .slide-stack__img--0 {
        transform: translate(-28px, 22px) rotate(-14deg);
    }
    .slide-stack:hover .slide-stack__img--1 {
        transform: translate(28px, 20px) rotate(12deg);
    }
}

/* =========================================
   MOBILE: más pequeño + menos “desborde”
   ========================================= */
@media (max-width: 480px) {
    .slide-stack {
        /* más pequeño en mobile */
        width: min(320px, calc(100vw - 40px));
        aspect-ratio: 1 / 1;
    }

    /* Reduce offsets para que iPhone no genere overflow */
    .slide-stack__img--0 {
        transform: translate(-10px, 10px) rotate(-5deg);
    }
    .slide-stack__img--1 {
        transform: translate(10px, 9px) rotate(5deg);
    }
    .slide-stack__img--2 {
        transform: translate(-6px, 6px) rotate(-3deg);
    }
    .slide-stack__img--3 {
        transform: translate(6px, 5px) rotate(3deg);
    }
}

/* Un extra para iPhone muy angosto */
@media (max-width: 360px) {
    .slide-stack {
        width: min(280px, calc(100vw - 40px));
    }

    .slide-stack__img--0 {
        transform: translate(-8px, 8px) rotate(-4deg);
    }
    .slide-stack__img--1 {
        transform: translate(8px, 7px) rotate(4deg);
    }
}
